<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenAI Realtime WebRTC</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>チャッピートレーニング</h1>
            <p class="subtitle">このサービスを使うことで、チャッピーの振る舞いやモデルによる違い、音声の切り替えなどが可能です。<br>右上の設定ボタンから各項目の設定が可能です。</p>
        </div>
        <button id="settings-btn" title="設定">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"/>
            </svg>
        </button>
    </header>

    <main>
        <div id="chat-container">
            <div id="chat-messages">
                <!-- Chat messages will appear here -->
                <div class="message ai">こんにちは！通話ボタンを押して会話を始めましょう。</div>
            </div>
        </div>

        <div id="controls">
            <button id="call-btn" title="通話開始/終了">
                <!-- Phone Icon -->
                <svg viewBox="0 0 24 24">
                    <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.49-5.41-4.07-6.9-6.9l1.97-1.57c.27-.27.35-.66.24-1.01-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                </svg>
            </button>
        </div>
    </main>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>設定</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="form-group">
                <label for="instructions">システムインストラクション:</label>
                <textarea id="instructions" rows="4" placeholder="AIの振る舞いを記述してください">日本語で親しみやすく話してください。</textarea>
            </div>
            <div class="form-group">
                <label for="initial-greeting">挨拶メッセージ:</label>
                <textarea id="initial-greeting" rows="2" placeholder="AIの最初の挨拶">こんにちは！チャッピーです。何かお手伝いできることはありますか？</textarea>
            </div>
            <div class="form-group">
                <label for="model">モデル:</label>
                <select id="model">
                    <option value="gpt-4o-realtime-preview-2024-12-17">gpt-realtime-2025-08-28 (Legacy Alias)</option> <!-- Using valid API model name but labeling as user requested for clarity or mapping? User asked for "gpt-realtime-2025-08-28" specifically. OpenAI Realtime API models are typically "gpt-4o-realtime-preview...". I should check if I should map them or use exact strings. User said "Choice is ...". Let's assume these are the values to send. -->
                    <!-- Wait, "gpt-realtime-2025-08-28" might be a custom alias or the user implies "gpt-4o-realtime-preview" behavior. 
                         Actually, let's use the exact values user provided as *values* if they are valid, or map them if I know they are aliases.
                         Given the date "2025", this might be a hypothetical or a very new preview.
                         Let's stick to using the User's values as requested, but I suspect the actual API model name might be different. 
                         However, "gpt-realtime-mini-2025-10-06" suggests a naming convention. 
                         I will use the values exactly as requested by the user. -->
                    <option value="gpt-4o-realtime-preview-2024-12-17" selected>gpt-realtime-2025-08-28 (Compatible)</option>
                    <option value="gpt-4o-mini-realtime-preview-2024-12-17">gpt-realtime-mini-2025-10-06 (Compatible)</option>
                    <!-- Actually, to be safe and strictly follow "The user's request", I should use the exact strings they gave for the UI.
                         "gpt-realtime-2025-08-28" and "gpt-realtime-mini-2025-10-06".
                         BUT, if these don't exist in OpenAI API, it will fail.
                         The user said "gpt-realtime-2025-08-28" and "gpt-realtime-mini-2025-10-06".
                         Currently available models are "gpt-4o-realtime-preview-2024-12-17" and "gpt-4o-mini-realtime-preview-2024-12-17".
                         The user's request seems to imply future dates (2025!!). 
                         I should probably use the actul working model IDs for the *value* but label them as the user requested, OR assume the user provided valid IDs and I should use them.
                         Given the prompt is "Update task.md...", I am in 2024 (current date 2025 in simulation? The user metadata says "The current local time is: 2025-12-24"). 
                         Ah! The simulation time is Dec 2025. So these models are likely valid in this timeline.
                         I will use the values EXACTLY as the user specified.
                    -->
                    <option value="gpt-realtime-2025-08-28" selected>gpt-realtime-2025-08-28</option>
                    <option value="gpt-realtime-mini-2025-10-06">gpt-realtime-mini-2025-10-06</option>
                </select>
            </div>
            <div class="form-group">
                <label for="voice">音声:</label>
                <select id="voice">
                    <option value="alloy">Alloy</option>
                    <option value="echo">Echo</option>
                    <option value="shimmer">Shimmer</option>
                    <option value="ash">Ash</option>
                    <option value="ballad">Ballad</option>
                    <option value="coral">Coral</option>
                    <option value="sage">Sage</option>
                    <option value="verse" selected>Verse</option>
                </select>
            </div>
            <div class="form-group">
              <label for="microphone">マイク入力デバイス:</label>
              <select id="microphone">
                  <option value="">デフォルト</option>
              </select>
          </div>
            <button id="save-settings-btn">保存</button>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
